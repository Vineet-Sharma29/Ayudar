{% extends 'dashboard/base.html' %}
{% load static %}

{% block head %}
    <title>Dashboard</title>
{% endblock %}


{% block content %}
    <div class="row mt-3">
        <div class="row w-100 align-bottom">
            <div class="col-12 text-right">
                <label for="file-input">
                    <form method="POST" enctype="multipart/form-data">
                        {% csrf_token %}

                        <div class="d-inline-block image-upload">
                            <label for="file-input">
                                <i class="fa fa-upload fa-2x" aria-hidden="true" data-toggle="tooltip"
                                   title="Upload File"></i>
                            </label>

                            {{ form.req_file }}
                        </div>
                        <button type="submit" class="d-inline-block ml-5 btn btn-primary align-top">Generate Result
                        </button>
                    </form>
                </label>
            </div>

        </div>
    </div>

    <div class="wildcards row mt-4 mb-4">
        <div class="mx-auto rounded well-container p-2 w-25 bg-light">
            <div class="well">
                <div class="row">
                    <h6 class="text-black col-8 font-weight-bold stats-heading">
                        <!--<span class="label label-danger pull-right">- 9%</span>--> OVERALL
                        DIFFICULTY</h6>
                    <img class="col-4" src="{% static "dashboard/images/test.svg" %}" alt="test" width="32"
                         height="32"/>
                </div>

                {% if courseoverview.0 == "Low" %}
                    <h1><span class="badge badge-warning mt-4">{{ courseoverview.0 }}</span></h1>

                {% elif courseoverview.0 == 'Moderate' %}
                    <h1><span class="badge badge-success mt-4">{{ courseoverview.0 }}</span></h1>

                {% else %}
                    <h1><span class="badge badge-primary mt-4">{{ courseoverview.0 }}</span></h1>

                {% endif %}
                {#                <p class="text-black p-2 pt-3 display-4 text-right">{{ courseoverview.0 }}</p>#}
            </div>
        </div>
        <div class="col-md-3 col-sm-12 col-md-3 col-xs-12 mx-auto rounded well-container p-2 w-25 bg-light">
            <div class="well">
                <div class="row">
                    <h6 class="text-black col-8 font-weight-bold stats-heading">
                        <!--<span class="label label-danger pull-right">- 9%</span>--> OVERALL<br/>
                        Risk</h6>

                    <img class="col-4" src="{% static "dashboard/images/risk.svg" %}" alt="test" width="32"
                         height="32"/>
                </div>
                {% if courseoverview.1 == "Low" %}
                    <h1><span class="badge badge-warning mt-4">{{ courseoverview.1 }}</span></h1>

                {% elif courseoverview.1 == 'Moderate' %}
                    <h1><span class="badge badge-success mt-4">{{ courseoverview.1 }}</span></h1>

                {% else %}
                    <h1><span class="badge badge-primary mt-4">{{ courseoverview.1 }}</span></h1>

                {% endif %}
            </div>
        </div>
        {#        <div class="mx-auto rounded well-container p-2 w-25 wildcard-color">#}
        {#            <div class="well">#}
        {#                <div class="row">#}
        {#                    <h5 class="text-black col-8"><!--<span class="label label-danger pull-right">- 9%</span>--> OVERALL#}
        {#                        RISK</h5>#}
        {#                    <img class="col-4" src="{% static "dashboard/images/risk.svg" %}" alt="test" width="32"#}
        {#                         height="32"/>#}
        {#                </div>#}
        {#                {% if courseoverview.1 == "Low" %}#}
        {#                    <h1><span class="badge mt-4 mx-5">{{ courseoverview.1 }}</span></h1>#}
        {##}
        {#                {% elif courseoverview.1 == 'Moderate' %}#}
        {#                    <h1><span class="badge badge-success mt-4">{{ courseoverview.1 }}</span></h1>#}
        {##}
        {#                {% else %}#}
        {#                    <h1><span class="badge badge-primary mt-4">{{ courseoverview.1 }}</span></h1>#}
        {##}
        {#                {% endif %}#}
        {#            </div>#}
        {#        </div>#}
        <div class="mx-auto rounded well-container p-2 w-25 bg-light">
            <div class="well">
                <div class="row">
                    <h6 class="text-black col-8 font-weight-bold stats-heading">
                        <!--<span class="label label-danger pull-right">- 9%</span>--> Cousrse<br/>Average</h6>
                    <img class="col-4" src="{% static "dashboard/images/graph.svg" %}" alt="test" width="32"
                         height="32"/>
                </div>
                <h1><span class="badge badge-danger mt-4">{{ courseoverview.3 }}</span></h1>
            </div>
        </div>

    </div><!--/row-->

    {#    <h2 class="display-5 my-2">Boxplot</h2>#}
    <div class="row">
        <div class="mx-5 mt-2" id="myDiv"></div>
    </div>


    <div class="row mt-5">
        <div class="col-6 mb-5 pb-5 w-100">
            <div class="col-12">
                <div class="accordion" id="accordionExample">
                    <div class="card">
                        <div class="card-header" id="headingOne">
                            <h5 class="mb-0">
                                <button class="btn btn-link btn-block text-left font-weight-bold" type="button"
                                        data-toggle="collapse"
                                        data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                    <i class="fas fa-search fa-2x mr-3 secondary-bg"></i>Cheat
                                    Filter
                                    <i class="ml-5 fas fa-caret-down"></i>
                                </button>
                            </h5>
                        </div>

                        <div id="collapseOne" class="collapse show fade" aria-labelledby="headingOne"
                             data-parent="#accordionExample">
                            <div class="card-body m-2">

                                {% for student in courseoverview.2 %}
                                    <div class="chip m-2 w-100">
                                        <a href="#"> <img src="{% static 'dashboard/images/st6.jpg' %}"
                                                          alt="Person"
                                                          width="96"
                                                          height="96">
                                            {{ student }}
                                            <span class="text-right badge badge-danger ml-5">Danger</span>
                                            <span class="text-right badge badge-warning">Warning</span>
                                        </a>
                                    </div>
                                    <hr class="hr-line"/>
                                {% endfor %}
                            </div>
                        </div>
                    </div>


                    <div class="card">
                        <div class="card-header" id="headingTwo">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed btn-block text-left font-weight-bold"
                                        type="button"
                                        data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false"
                                        aria-controls="collapseTwo">
                                    <i class="fas fa-sliders-h secondary-bg mr-3 fa-2x"></i>Course
                                    Quartiles
                                    <i class="ml-2 fas fa-caret-down"></i>
                                </button>
                            </h5>
                        </div>
                        <div id="collapseTwo" class="collapse fade" aria-labelledby="headingTwo"
                             data-parent="#accordionExample">
                            <div class="card-body">

                                {% for quartile in courseoverview.4 %}
                                    <div class="row">
                                        <div class="w-100 pl-3"><h3 class="stats-heading display-5 text-primary">
                                            Quartile {{ forloop.counter }}</h3></div>
                                        <div class="row w-100 pl-3">
                                            <div class="col-9 mt-2">
                                                <div class="progress">
                                                    <div class="progress-bar progress-bar-striped progress-bar-animated"
                                                         style="width:{{ quartile }}%"></div>
                                                </div>
                                            </div>
                                            <div>
                                                <p class="text-success ml-3 text-left font-weight-bold display-4"><span
                                                        class="font-weight-light">+</span>{{ quartile }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <hr/>

                                {% endfor %}
                            </div>
                        </div>
                    </div>


                    <div class="card mb-5">
                        <div class="card-header" id="headingFive">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed btn-block text-left font-weight-bold"
                                        type="button"
                                        data-toggle="collapse" data-target="#collapseFive" aria-expanded="false"
                                        aria-controls="collapseFive">
                                    <img src="{% static "dashboard/images/scroll.png" %}" alt="icon" width="28"
                                         height="28" class="mr-3"/>Course
                                    Overview
                                    <i class="ml-3 fas fa-caret-down"></i>
                                </button>
                            </h5>
                        </div>
                        <div id="collapseFive" class="collapse fade" aria-labelledby="headingFive"
                             data-parent="#accordionExample">
                            <div class="card-body">


                                <div class="row">
                                    <div class="row pl-3">
                                        <div class="col-7">
                                            <h3
                                                    class="stats-heading display-5 text-primary">
                                                Course Difficulty</h3>
                                        </div>
                                        <div class="col-5">
                                             <img class="col-4" src="{% static "dashboard/images/test.svg" %}" alt="test"
                                             width="32"
                                             height="32"
                                             class="d-inline-block"/>
                                        </div>
                                    </div>

                                    <div class="row w-100 pl-3">

                                        <div>
                                            <p class="text-success ml-3 text-left font-weight-bold display-6">{{ courseoverview.0 }}</p>
                                        </div>
                                    </div>
                                </div>
                                <hr/>

                                <div class="row">
                                    <div class="w-100 pl-3"><h3 class="stats-heading display-5 text-primary">
                                        Course Risk</h3></div>
                                    <div class="row w-100 pl-3">

                                        <div>
                                            <p class="text-success ml-3 text-left font-weight-bold display-6">{{ courseoverview.1 }}</p>
                                        </div>
                                    </div>
                                </div>
                                <hr/>

                                <div class="row">
                                    <div class="w-100 pl-3"><h3 class="stats-heading display-5 text-primary">
                                        Course Average</h3></div>
                                    <div class="row w-100 pl-3">

                                        <div>
                                            <p class="text-success ml-3 text-left font-weight-bold display-6">{{ courseoverview.3 }}</p>
                                        </div>
                                    </div>
                                </div>
                                <hr/>


                                {#                                {% for quartile in courseoverview.4 %}#}
                                {#                                    <div class="row">#}
                                {#                                        <div class="w-100 pl-3"><h3 class="stats-heading display-5 text-primary">#}
                                {#                                            Quartile {{ forloop.counter }}</h3></div>#}
                                {#                                        <div class="row w-100 pl-3">#}
                                {#                                            <div class="col-9 mt-2">#}
                                {#                                                <div class="progress">#}
                                {#                                                    <div class="progress-bar progress-bar-striped progress-bar-animated"#}
                                {#                                                         style="width:{{ quartile }}%"></div>#}
                                {#                                                </div>#}
                                {#                                            </div>#}
                                {#                                            <div>#}
                                {#                                                <p class="text-success ml-3 text-left font-weight-bold display-4"><span#}
                                {#                                                        class="font-weight-light">+</span>{{ quartile }}</p>#}
                                {#                                            </div>#}
                                {#                                        </div>#}
                                {#                                    </div>#}
                                {#                                    <hr/>#}
                                {##}
                                {#                                {% endfor %}#}
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>


        <div class="col-6 mb-5 pb-5 w-100">
            <div class="col-12">
                <div class="accordion" id="accordionExample">
                    <div class="card">
                        <div class="card-header" id="headingOne">
                            <h5 class="mb-0">
                                <button class="btn btn-link btn-block text-left font-weight-bold" type="button"
                                        data-toggle="collapse"
                                        data-target="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
                                    <i class="fas fa-sticky-note fa-2x mr-3 secondary-bg"></i>Poor
                                    Performers
                                    <i class="ml-2 fas fa-caret-down"></i>
                                </button>

                            </h5>
                        </div>

                        <div id="collapseThree" class="collapse show fade" aria-labelledby="headingTwo"
                             data-parent="#accordionExample">
                            <div class="card-body">

                                {% for student in examoverview.2 %}
                                    <div class="chip m-2 w-100">
                                        <a href="#"> <img src="{% static 'dashboard/images/st6.jpg' %}"
                                                          alt="Person"
                                                          width="96"
                                                          height="96">
                                            {{ student }}
                                            <span class="text-right badge badge-danger ml-5">Danger</span>
                                            <span class="text-right badge badge-warning">Warning</span>
                                        </a>
                                    </div>
                                    <hr class="hr-line"/>
                                {% endfor %}
                            </div>
                        </div>
                    </div>


                    <div class="card">
                        <div class="card-header" id="headingTwo">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed btn-block text-left font-weight-bold"
                                        type="button"
                                        data-toggle="collapse" data-target="#collapseFour" aria-expanded="false"
                                        aria-controls="collapseFour">
                                    <i class="fas fa-sliders-h mr-3 fa-2x secondary-bg"></i>Exam Quartiles
                                    <i class="ml-3 fas fa-caret-down"></i>
                                </button>
                            </h5>
                        </div>
                        <div id="collapseFour" class="collapse fade" aria-labelledby="headingFour"
                             data-parent="#accordionExample">
                            <div class="card-body">

                                {% for quartile in examoverview.4 %}
                                    <div class="row">
                                        <div class="w-100 pl-3"><h3 class="stats-heading display-5 text-primary">
                                            Quartile {{ forloop.counter }}</h3></div>
                                        <div class="row w-100 pl-3">
                                            <div class="col-9 mt-2">
                                                <div class="progress">
                                                    <div class="progress-bar progress-bar-striped progress-bar-animated"
                                                         style="width:{{ quartile }}%"></div>
                                                </div>
                                            </div>
                                            <div>
                                                <p class="text-success ml-3 text-left font-weight-bold display-4"><span
                                                        class="font-weight-light">+</span>{{ quartile }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <hr/>
                                {% endfor %}
                            </div>
                        </div>
                    </div>

                    <div class="card mb-5">
                        <div class="card-header" id="headingSix">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed btn-block text-left font-weight-bold"
                                        type="button"
                                        data-toggle="collapse" data-target="#collapseSix" aria-expanded="false"
                                        aria-controls="collapseSix">
                                    <img src="{% static "dashboard/images/scroll.png" %}" alt="icon" width="28"
                                         height="28" class="mr-3"/>Exam
                                    Overview
                                    <i class="ml-3 fas fa-caret-down"></i>
                                </button>
                            </h5>
                        </div>
                        <div id="collapseSix" class="collapse fade" aria-labelledby="headingSix"
                             data-parent="#accordionExample">
                            <div class="card-body">

                                <div class="row">
                                    <div class="row pl-3">
                                        <div class="col-7">
                                            <h3
                                                    class="stats-heading display-5 text-primary">
                                                Exam Difficulty</h3>
                                        </div>
                                        <div class="col-5">
                                             <img class="col-4" src="{% static "dashboard/images/test.svg" %}" alt="test"
                                             width="32"
                                             height="32"
                                             class="d-inline-block"/>
                                        </div>
                                    </div>

                                    <div class="row w-100 pl-3">

                                        <div>
                                            <p class="text-success ml-3 text-left font-weight-bold display-6">{{ examoverview.0 }}</p>
                                        </div>
                                    </div>
                                </div>
                                <hr/>

                                <div class="row">
                                    <div class="w-100 pl-3"><h3 class="stats-heading display-5 text-primary">
                                        Exam Risk</h3></div>
                                    <div class="row w-100 pl-3">

                                        <div>
                                            <p class="text-success ml-3 text-left font-weight-bold display-6">{{ examoverview.1 }}</p>
                                        </div>
                                    </div>
                                </div>
                                <hr/>

                                <div class="row">
                                    <div class="w-100 pl-3"><h3 class="stats-heading display-5 text-primary">
                                        Exam Average</h3></div>
                                    <div class="row w-100 pl-3">

                                        <div>
                                            <p class="text-success ml-3 text-left font-weight-bold display-6">{{ examoverview.3 }}</p>
                                        </div>
                                    </div>
                                </div>
                                <hr/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}


{% block script %}
    <script>
        var y0 = [], i = 0;

        for (i = 0; i < 50; i++) {
            y0[i] = Math.random()
        }
        {#        {% for entry in tupleformarks %}#}
        {#            {% for j in entry %}#}
        {#                {% y[i] = j %}#}
        {#                i = i + 1#}
        {#            {% endfor %}#}
        {#        {% endfor %}#}

        var trace1 = {
            y: y0,
            type: 'box'
        };


        var data = [trace1];

        Plotly.newPlot('myDiv', data);
    </script>

    <script>
        $("i").click(function () {
            $("input[type='file']").trigger('click');
        });

        $('input[type="file"]').on('change', function () {
            var val = $(this).val();
            $(this).siblings('span').text(val);
        })
    </script>

{% endblock %}